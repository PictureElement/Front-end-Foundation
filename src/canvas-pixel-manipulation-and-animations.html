<!doctype html>
<html lang='en'>
  <head>
    <title>HTML5 Canvas/Pixel manipulation &amp; Animations</title>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta name='description' content='Fundamental resources about HTML5 & friends.'>
    <meta name='author' content='PictureElement (Marios Sofokleous)'>
    <meta name='theme-color' content='#007f7f'>
    <link rel='stylesheet' href='css/bootstrap.min.css' integrity='sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb' crossorigin='anonymous'>
    <link rel='stylesheet' href='css/style.css'>
    <link rel='manifest' href='manifest.json'>
    <script src='js/jquery.min.js' defer></script>
    <script src='js/popper.min.js' defer></script>
    <script src='js/bootstrap.min.js' defer></script>
    <script src='js/site.js' defer></script>
    <script src='js/run_prettify.js' defer></script>
    <script src='svg-with-js/js/fa-solid.js' defer></script>
    <script src='svg-with-js/js/fontawesome.js' defer></script>
  </head>
  <body>
    <!-- RETURN TO TOP BUTTON -->
    <button id='return-to-top' title='Return to top'><i style='color:white' class='fas fa-chevron-up'></i></button>
    <!-- SITE NAVIGATION -->
    <header class='navbar navbar-expand navbar-light bg-light flex-column flex-md-row'>
      <!-- LOGO -->
      <a class='navbar-brand' href='index.html'>
        <img src="images/logo-1x.png" srcset="images/logo-1x.png 1x, images/logo-2x.png 2x, images/logo-3x.png 3x, images/logo-4x.png 4x" class="d-inline-block align-top" alt="HTML5Tech logo">
      </a>
      <div class='flex-row'>
        <ul class='navbar-nav flex-row'>
          <li class='nav-item'>
            <a class='nav-link' href='#'>HTML</a>
          </li>
          <li class='nav-item'>
            <a class='nav-link' href='#'>CSS</a>
          </li>
          <li class="nav-item dropdown active">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              JAVASCRIPT
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href='js-data-related.html'>Vanilla</a>
              <a class="dropdown-item" href='jquery-introduction.html'>jQuery</a>
              <a class="dropdown-item" href='canvas-introduction.html'>Canvas API<span class='sr-only'>(current)</span></a>
            </div>
          </li>
        </ul>
      </div>
    </header>
    <div class='container-fluid'>
      <div class='row d-flex'>
        <div class='sidebar col-12 col-md-3 col-xl-2'>
          <div class='text-center'>
            <button class='more-btn btn btn-link d-md-none' type='button' data-toggle='collapse' data-target='#sidebarContent' aria-controls='sidebarContent' aria-label='Toggle sidebar navigation'>
              MORE
            </button>
          </div>
          <nav class='sidebar-links collapse' id='sidebarContent'>
            <div>
              <h5 class='sb-topic'>Basic Canvas</h5>
              <ol class='sb-list'>
                <li><a href='canvas-introduction.html'>Introduction</a></li>
                <li id='current'><a href='#'>Pixel manipulation &amp; Animations</a></li>
              </ol>
            </div>
          </nav>
        </div>
        <!-- MAIN -->
        <main class='col-12 col-md-9 col-xl-8'>
          <h1 class='text-left'>Pixel manipulation &amp; Animations</h1>
          <hr>
          <!-- CONTENT -->
          <div class='card content-card'>
            <div class='card-header' id='headingOne'>
              <button class='content-btn btn btn-link' type='button' data-toggle='collapse' data-target='#collapseOne' aria-controls='collapseOne' aria-label='Toggle content' aria-expanded='false'>
                Contents
              </button>
            </div>
            <div id='collapseOne' class='collapse' role='tabpanel' aria-labelledby='headingOne' data-parent='#accordion'>
              <div class='card-body'>
                <ol class='content-nav'>
                  <li><a href='#1'></a></li>
                  <li><a href='#2'></a></li>
                  <li><a href='#3'></a></li>
                  <li><a href='#4'></a></li>
                  <li><a href='#5'></a></li>
                  <li><a href='#6'></a></li>
                  <li><a href='#7'></a></li>
                </ol>
              </div>
            </div>
          </div>
          <!-- SECTION 1 -->
          <section>
            <h2>
              <a id='1' data-toggle='collapse' role='button' href='#accordion-1' aria-expanded='true' aria-controls='accordion-1'>
                The ImageData interface
              </a>
            </h2>
            <hr>
            <div id='accordion-1' class='collapse show'>
              <h3>Introduction</h3>
              <p>
                The <code>ImageData</code> interface represents the pixel data
                on the <code>&lt;canvas></code> element.
              </p>
              <dl>
                <dt><code><i>ctx</i>.createImageData(<i>width</i>, <i>height</i>);</code></dt>
                <dt><code><i>ctx</i>.createImageData(<i>imagedata</i>);</code></dt>
                <dd>
                  Creates a new, blank <i>ImageData</i> object with the
                  specified dimensions.
                </dd>
                <dt><code><i>ctx</i>.getImageData(<i>sx</i>, <i>sy</i>, <i>sw</i>, <i>sh</i>);</code></dt>
                <dd>
                  Return an ImageData object representing the underlying pixel
                  data for the area of the canvas.
                </dd>
                <dt><code><i>ctx</i>.putImageData(<i>imagedata</i>, <i>dx</i>, <i>dy</i>);</code></dt>
                <dt><code><i>ctx</i>.putImageData(<i>imagedata</i>, <i>dx</i>, <i>dy</i>, <i>dirtyX</i>, <i>dirtyY</i>, <i>dirtyW</i>, <i>dirtyH</i>);</code></dt>
                <dd>
                  Paint data from the given <i>ImageData</i> object onto the
                  bitmap.
                </dd>
                <dt><code><i>imagedata</i>.data</code></dt>
                <dd>
                  Get the <i>Uint8ClampedArray</i> containing the data in the
                  RGBA order, with integer values between 0 and 255.
                </dd>
                <dt><code><i>imagedata</i>.height</code></dt>
                <dd>Get the actual height, in pixels, of the ImageData.</dd>
                <dt><code><i>imagedata</i>.width</code></dt>
                <dd>Get the actual width, in pixels, of the ImageData.</dd>
              </dl>
              <div>
                <p class="info align-middle">
                  <strong>Note:</strong> <code>Uint8ClampedArray</code>
                  contains the image data in the RGBA order:
                  [r<sub>0</sub>, g<sub>0</sub>, b<sub>0</sub>, a<sub>0</sub>, r<sub>1</sub>, g<sub>1</sub>, b<sub>1</sub>, a<sub>1</sub>, ..., r<sub>n</sub>, g<sub>n</sub>, b<sub>n</sub>, a<sub>n</sub>]
                </p>
              </div>
              <h3>Pixel manipulation</h3>
              <h4>Example 1</h4>
              <p>
                This program creates a 2D Canvas and uses
                <code><i>ctx</i>.getImageData</code> to retrieve the
                <code>ImageData</code> object representing the underlying pixel
                data for the area of the canvas. Afterward, it changes every
                10th pixel to a solid green color:
              </p>
              <p><u>HTML</u></p>
              <pre class='prettyprint linenums'><code>&lt;!DOCTYPE html>
&lt;html>
  &lt;head>
  &lt;/head>
  &lt;body>
    &lt;canvas id="c" width="200", height="200" style="border:1px solid #000;">
      Pixel manipulation: Change every 10th pixel to a solid green color.
    &lt;/canvas>
    &lt;script>
      var canvas = document.getElementById('c');

      // Check for canvas support
      if (canvas.getContext) {
        // Access the rendering context
        var ctx = canvas.getContext('2d');

        // ImageData object
        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        // One-dimensional array containing the data in the RGBA order
        var data = imageData.data;

        function paintGreen(data) {
          // data represents the Uint8ClampedArray containing the data
          // in the RGBA order [r0, g0, b0, a0, r1, g1, b1, a1, ..., rn, gn, bn, an]
          var numPixels = data.length / 4;

          for (let i = 0; i &lt; numPixels; i += 10) {
            data[i * 4 + 1] = 255; // Green channel
            data[i * 4 + 3] = 255; // Alpha channel
          }

          // Paint pixel data into the context
          ctx.putImageData(imageData, 0, 0);
        }

        paintGreen(data);
      }
    &lt;/script>
  &lt;/body>
&lt;/html></code></pre>
              <p><u>Result</u></p>
              <iframe height="250" src="demos/27.html" title="result"></iframe>
              <h4>Example 2</h4>
              <p>
                This program demonstrates the process of converting images to
                grayscale and the process of color-inversion using simple
                techniques.
              </p>
              <p>
                Averaging is the fastest and easiest grayscale conversion
                technique and it works like this:
              </p>
              <div class="math">
                <var>gray</var> = (<var>red</var> + <var>green</var> + <var>blue</var>) / 3
              </div>
              <p>
                Color inversion is simple, each color channel is subtracted from
                the max value of 255:
              </p>
              <div class="math">
                <var>newR</var> = 255 - <var>R</var><br>
                <var>newG</var> = 255 - <var>G</var><br>
                <var>newB</var> = 255 - <var>B</var>
              </div>
              <p><u>HTML</u></p>
              <pre class='prettyprint linenums'><code>&lt;!DOCTYPE html>
&lt;html>
  &lt;head>
    &lt;style>
      canvas {
        max-width: 200px;
        border:1px solid #000;
        display: block;
      }
      input {
        margin-top: 1rem;
      }
    &lt;/style>
  &lt;/head>
  &lt;body>
    &lt;canvas id='c'>
      Pixel manipulation: Grayscaling and Color inversion
    &lt;/canvas>
    &lt;input id='grayscaleBtn' type='button' value='Grayscale'>
    &lt;input id='invertBtn' type='button' value='Invert'>
    &lt;input id='resetBtn' type='button' value='Reset'>
    &lt;script>
      var canvas = document.getElementById('c');

      // Check for canvas support
      if (canvas.getContext) {

        // Initialization
        function init(image) {
          // Use the intrinsic size of image in CSS pixels
          canvas.width = image.naturalWidth;
          canvas.height = image.naturalHeight;
          // Draw image onto the canvas
          ctx.drawImage(image, 0, 0);
        }

        // Grayscaling
        var grayscale = function () {
          // ImageData object
          var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
          // One-dimensional array containing the data in the RGBA order
          var data = imageData.data;
          // data represents the Uint8ClampedArray containing the data
          // in the RGBA order [r0, g0, b0, a0, r1, g1, b1, a1, ..., rn, gn, bn, an]
          for (let i = 0; i &lt; data.length; i += 4) {
            // Averaging method: gray = (r + g + b) / 3
            let gray = (data[i] + data[i+1] + data[i+2]) / 3;
            // Red channel
            data[i] = gray;
            // Green channel
            data[i+1] = gray;
            // Blue channel
            data[i+2] = gray;
          }
          // Paint pixel data into the context
          ctx.putImageData(imageData, 0, 0);
        }

        // Color inversion
        var invert = function () {
          // ImageData object
          var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
          // One-dimensional array containing the data in the RGBA order
          var data = imageData.data;
          // data represents the Uint8ClampedArray containing the data
          // in the RGBA order [r0, g0, b0, a0, r1, g1, b1, a1, ..., rn, gn, bn, an]
          for (let i = 0; i &lt; data.length; i += 4) {
            // Red channel
            data[i] = 255 - data[i];
            // Green channel
            data[i+1] = 255 - data[i+1];
            // Blue channel
            data[i+2] = 255 - data[i+2];
          }
          // Paint pixel data into the context
          ctx.putImageData(imageData, 0, 0);
        }

        // Access the rendering context
        var ctx = canvas.getContext('2d');

        // Create image
        var img = new Image();
        img.src = '../images/image-1.jpg';
        // The callback will be called when the image has finished loading
        img.onload = function() {
          // Initalize canvas
          init(this);
        };

        // Click events
        document.getElementById('grayscaleBtn').addEventListener('click', grayscale);
        document.getElementById('invertBtn').addEventListener('click', invert);
        document.getElementById('resetBtn').addEventListener('click', function() {
          // Erase any previously drawn content
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          // Draw image onto the canvas
          ctx.drawImage(img, 0, 0);
        });
      }
    &lt;/script>
  &lt;/body>
&lt;/html></code></pre>
              <p><u>Result</u></p>
              <iframe height="260" src="demos/28.html" title="result"></iframe>
              <div>
                <p class="info align-middle">
                  <strong>Note:</strong> For more info on image processing 
                  please visit 
                  <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas">MDN</a> 
                  and 
                  <a href="http://www.tannerhelland.com/programming-directory/">Tanner Helland</a>.
                </p>
              </div>
            </div>
          </section>
          <!-- SECTION 2 -->
          <section>
            <h2>
              <a id='2' data-toggle='collapse' role='button' href='#accordion-2' aria-expanded='true' aria-controls='accordion-2'>
                Section 2
              </a>
            </h2>
            <hr>
            <div id='accordion-2' class='collapse show'>

            </div>
          </section>
          <!-- SECTION 3 -->
          <section>
            <h2>
              <a id='3' data-toggle='collapse' role='button' href='#accordion-3' aria-expanded='true' aria-controls='accordion-3'>
                Section 3
              </a>
            </h2>
            <hr>
            <div id='accordion-3' class='collapse show'>

            </div>
          </section>
          <!-- SECTION 4 -->
          <section>
            <h2>
              <a id='4' data-toggle='collapse' role='button' href='#accordion-4' aria-expanded='true' aria-controls='accordion-4'>
                Section 4
              </a>
            </h2>
            <hr>
            <div id='accordion-4' class='collapse show'>

            </div>
          </section>
          <!-- SECTION 5 -->
          <section>
            <h2>
              <a id='5' data-toggle='collapse' role='button' href='#accordion-5' aria-expanded='true' aria-controls='accordion-5'>
                Section 5
              </a>
            </h2>
            <hr>
            <div id='accordion-5' class='collapse show'>

            </div>
          </section>
          <!-- SECTION 6 -->
          <section>
            <h2>
              <a id='6' data-toggle='collapse' role='button' href='#accordion-6' aria-expanded='true' aria-controls='accordion-6'>
                Section 6
              </a>
            </h2>
            <hr>
            <div id='accordion-6' class='collapse show'>

            </div>
          </section>
          <!-- SECTION 7 -->
          <section>
            <h2>
              <a id='7' data-toggle='collapse' role='button' href='#accordion-7' aria-expanded='true' aria-controls='accordion-7'>
                Section 7
              </a>
            </h2>
            <hr>
            <div id='accordion-7' class='collapse show'>

            </div>
          </section>
          <!-- SECTION 8 -->
          <section>
            <h2>
              <a id='8' data-toggle='collapse' role='button' href='#accordion-8' aria-expanded='true' aria-controls='accordion-8'>
                Section 8
              </a>
            </h2>
            <hr>
            <div id='accordion-8' class='collapse show'>

            </div>
          </section>
        </main>
        <!-- d-none d-xl-block d-xl-2: Hide the element for all screen sizes except on xlarge devices -->
        <div class='ad-space d-none d-xl-block col-xl-2'>
          <div class='text-center'>
            <h5>Ad1</h5>
            <img src='images/150x100.png' alt='advertisement'>
            <h5>Ad2</h5>
            <img src='images/150x100.png' alt='advertisement'>
            <h5>Ad3</h5>
            <img src='images/150x100.png' alt='advertisement'>
            <h5>Ad4</h5>
            <img src='images/150x100.png' alt='advertisement'>
            <h5>Ad5</h5>
            <img src='images/150x100.png' alt='advertisement'>
            <h5>Ad6</h5>
            <img src='images/150x100.png' alt='advertisement'>
          </div>
        </div>
      </div>
    </div> <!-- END OF CONTAINER -->
    <!-- FOOTER -->
    <footer class='text-center text-muted'>
      <div class='license'>
        <div>
          <a rel='license' href='https://creativecommons.org/licenses/by-sa/4.0/'><img width='100' alt='CC BY-SA 4.0 License' style='border-width:0' src='images/cc-by-sa-4.svg' /></a><br>Documentation is licensed under the <a rel='license' href='https://creativecommons.org/licenses/by-sa/4.0/'>CC BY-SA 4.0 License</a>.
        </div>
        <div>
          <a rel='license' href='https://www.gnu.org/licenses/agpl-3.0'><img width='80' alt='GNU AGPLv3 License' style='border-width:0' src='images/agpl-v3.svg' /></a><br><a href='https://github.com/PictureElement/html5tech'>Source code</a> is licensed under the <a rel='license' href='https://www.gnu.org/licenses/agpl-3.0'>AGPL v3 License</a>.
        </div>
      </div>
      <div class='copyright'>
        Design &amp; development by <a href='https://pictureelement.github.io/portfolio-2'>PictureElement</a> (Marios Sofokleous).
      </div>
    </footer>
  </body>
</html>
